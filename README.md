# SASA Platform - n8n å…¨åŸŸé˜å¤šç§Ÿæˆ· SaaS å¹³å°

**SASA Platform** æ˜¯åŸºäº n8n æ·±åº¦å®šåˆ¶çš„å¤šç§Ÿæˆ· SaaS å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°ï¼Œä¸“ä¸ºä¼ä¸šçº§åº”ç”¨åœºæ™¯è®¾è®¡ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

- **åç§°**: n8n-quanyuge (SASA Platform)
- **ç‰ˆæœ¬**: 1.119.0
- **åŸºç¡€**: n8n å¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°
- **ç±»å‹**: å¤šç§Ÿæˆ· SaaS å¹³å°
- **å½“å‰åˆ†æ”¯**: 20251102

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### å¤šç§Ÿæˆ·æ¶æ„
- **ç§Ÿæˆ·éš”ç¦»**: å®Œæ•´çš„æ•°æ®å’Œèµ„æºéš”ç¦»
- **ç‹¬ç«‹å·¥ä½œç©ºé—´**: æ¯ä¸ªç§Ÿæˆ·æ‹¥æœ‰ç‹¬ç«‹çš„å·¥ä½œç©ºé—´å’Œé…ç½®
- **çµæ´»è®¡è´¹**: æ”¯æŒæŒ‰ç§Ÿæˆ·ã€ç”¨æˆ·ã€æ‰§è¡Œæ¬¡æ•°ç­‰å¤šç»´åº¦è®¡è´¹

### ä¸‰å±‚èŠ‚ç‚¹æ¶æ„
- **å†…ç½®èŠ‚ç‚¹**: n8n å®˜æ–¹æä¾›çš„ 400+ é›†æˆèŠ‚ç‚¹
- **å¹³å°èŠ‚ç‚¹**: SASA å¹³å°ç»Ÿä¸€æä¾›çš„è‡ªå®šä¹‰èŠ‚ç‚¹
- **ç§Ÿæˆ·èŠ‚ç‚¹**: å„ç§Ÿæˆ·è‡ªå®šä¹‰å¼€å‘çš„ç§æœ‰èŠ‚ç‚¹

### ä¼ä¸šçº§åŠŸèƒ½
- âœ… LDAP/SAML/OIDC SSO
- âœ… é«˜çº§æƒé™ç®¡ç†å’Œé¡¹ç›®è§’è‰²
- âœ… Git é›†æˆ (Source Control)
- âœ… å·¥ä½œæµå†å²å’Œç‰ˆæœ¬æ§åˆ¶
- âœ… ç¯å¢ƒå˜é‡å’Œå¤–éƒ¨å¯†é’¥ç®¡ç†
- âœ… AI Assistant å’Œ LangChain é›†æˆ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### Monorepo ç»“æ„

```
n8n-quanyuge/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ @n8n/                    # æ ¸å¿ƒåŒ…
â”‚   â”‚   â”œâ”€â”€ api-types/           # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ backend-common/      # åç«¯é€šç”¨åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ db/                  # æ•°æ®åº“å±‚
â”‚   â”‚   â”œâ”€â”€ nodes-langchain/     # AI/LangChain èŠ‚ç‚¹
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ frontend/                # å‰ç«¯åŒ…
â”‚   â”‚   â”œâ”€â”€ editor-ui/           # Vue 3 ä¸»ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ admin-panel/         # ç®¡ç†é¢æ¿
â”‚   â”‚   â”œâ”€â”€ @n8n/
â”‚   â”‚   â”‚   â”œâ”€â”€ design-system/   # UI ç»„ä»¶åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ i18n/            # å›½é™…åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/          # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ cli/                     # Express æœåŠ¡å™¨å’Œ CLI
â”‚   â”œâ”€â”€ core/                    # å·¥ä½œæµæ‰§è¡Œå¼•æ“
â”‚   â”œâ”€â”€ workflow/                # å·¥ä½œæµæ ¸å¿ƒé€»è¾‘
â”‚   â””â”€â”€ nodes-base/              # å†…ç½®èŠ‚ç‚¹é›†åˆ
â”œâ”€â”€ CLAUDE.md                    # AI åŠ©æ‰‹æŒ‡ä»¤æ–‡æ¡£
â””â”€â”€ package.json                 # Monorepo é…ç½®
```

### æŠ€æœ¯æ ˆ

**åç«¯**
- Node.js (>= 22.16)
- TypeScript
- Express.js
- TypeORM (æ”¯æŒ SQLite/PostgreSQL/MySQL)
- ä¾èµ–æ³¨å…¥ (@n8n/di)

**å‰ç«¯**
- Vue 3 + Composition API
- TypeScript
- Vite
- Pinia (çŠ¶æ€ç®¡ç†)
- Element Plus (UI ç»„ä»¶)

**æ„å»ºå·¥å…·**
- pnpm (>= 10.18.3) - åŒ…ç®¡ç†å™¨
- Turbo - Monorepo æ„å»ºç¼–æ’
- Biome + ESLint - ä»£ç è´¨é‡
- Lefthook - Git é’©å­

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
Node.js >= 22.16
pnpm >= 10.18.3
```

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨åç«¯æœåŠ¡ (ç«¯å£ 5678)
pnpm dev:be

# å¯åŠ¨å‰ç«¯ç¼–è¾‘å™¨ (ç«¯å£ 8080)
pnpm dev:fe:main

# å¯åŠ¨ç®¡ç†é¢æ¿ (ç«¯å£ 5679)
pnpm dev:fe:admin

# æˆ–åŒæ—¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
pnpm dev
```

### ç”Ÿäº§æ„å»º

```bash
# å®Œæ•´æ„å»º
pnpm build

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# ä»£ç æ£€æŸ¥
pnpm lint

# æ ¼å¼åŒ–ä»£ç 
pnpm format
```

## ğŸ“¦ æ ¸å¿ƒåŒ…è¯´æ˜

### åç«¯æ ¸å¿ƒ

- **`@n8n/cli`** - Express æœåŠ¡å™¨ã€REST APIã€CLI å‘½ä»¤
- **`@n8n/core`** - å·¥ä½œæµæ‰§è¡Œå¼•æ“
- **`@n8n/workflow`** - å·¥ä½œæµæ¥å£å’Œç±»å‹
- **`@n8n/db`** - æ•°æ®åº“è®¿é—®å±‚
- **`@n8n/backend-common`** - åç«¯å…±äº«é€»è¾‘

### å‰ç«¯æ ¸å¿ƒ

- **`editor-ui`** - ä¸»ç¼–è¾‘å™¨ç•Œé¢
- **`admin-panel`** - ç®¡ç†å‘˜é¢æ¿
- **`@n8n/design-system`** - UI ç»„ä»¶åº“
- **`@n8n/stores`** - Pinia çŠ¶æ€ç®¡ç†
- **`@n8n/i18n`** - å›½é™…åŒ–æ”¯æŒ

### èŠ‚ç‚¹ç›¸å…³

- **`nodes-base`** - å†…ç½®èŠ‚ç‚¹ (400+ é›†æˆ)
- **`@n8n/nodes-langchain`** - AI/LangChain èŠ‚ç‚¹
- **`@n8n/node-cli`** - èŠ‚ç‚¹å¼€å‘ CLI å·¥å…·

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°èŠ‚ç‚¹

```bash
# ä½¿ç”¨ node-dev CLI åˆ›å»ºèŠ‚ç‚¹
pnpm --filter=@n8n/node-cli run:node-dev new <èŠ‚ç‚¹åç§°>
```

### å¼€å‘æœ€ä½³å®è·µ

1. **TypeScript** - ç¦æ­¢ä½¿ç”¨ `any`ï¼Œä¼˜å…ˆä½¿ç”¨ç±»å‹å®ˆå«
2. **é”™è¯¯å¤„ç†** - ä½¿ç”¨ `UnexpectedError`ã€`OperationalError` æˆ– `UserError`
3. **å›½é™…åŒ–** - æ‰€æœ‰ UI æ–‡æœ¬å¿…é¡»ä½¿ç”¨ i18n
4. **CSS** - ä½¿ç”¨ CSS å˜é‡ï¼Œé¿å…ç¡¬ç¼–ç åƒç´ å€¼
5. **æµ‹è¯•** - åœ¨åŒ…ç›®å½•å†…è¿è¡Œæµ‹è¯• (`cd packages/xxx && pnpm test`)

### ä»£ç è´¨é‡æ£€æŸ¥

```bash
# åœ¨ä¿®æ”¹çš„åŒ…ç›®å½•ä¸­è¿è¡Œ
cd packages/cli
pnpm lint
pnpm typecheck

# ä»…åœ¨å‡†å¤‡ PR æ—¶è¿è¡Œå…¨é‡æ£€æŸ¥
pnpm lint
pnpm typecheck
```

## ğŸ—„ï¸ æ•°æ®åº“æ”¯æŒ

- SQLite (å¼€å‘ç¯å¢ƒæ¨è)
- PostgreSQL (ç”Ÿäº§ç¯å¢ƒæ¨è)
- MySQL/MariaDB

## ğŸ” å®‰å…¨æ€§

- å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)
- SSO é›†æˆ (LDAP/SAML/OIDC)
- ç¯å¢ƒå˜é‡å’Œå¯†é’¥ç®¡ç†
- å®¡è®¡æ—¥å¿—

## ğŸ“Š éƒ¨ç½²é€‰é¡¹

### Docker éƒ¨ç½²

```bash
docker volume create n8n_data
docker run -it --rm \
  --name n8n \
  -p 5678:5678 \
  -v n8n_data:/home/node/.n8n \
  <your-registry>/n8n-quanyuge:latest
```

### ç¯å¢ƒå˜é‡

```bash
# æ•°æ®åº“é…ç½®
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=localhost
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=n8n
DB_POSTGRESDB_PASSWORD=n8n

# æœåŠ¡å™¨é…ç½®
N8N_HOST=0.0.0.0
N8N_PORT=5678
N8N_PROTOCOL=https
N8N_BASE_URL=https://your-domain.com

# åŠ å¯†å¯†é’¥
N8N_ENCRYPTION_KEY=<your-encryption-key>
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•
cd packages/cli
pnpm test

# E2E æµ‹è¯•
pnpm --filter=n8n-playwright test:local
```

## ğŸ“ æ–‡æ¡£

- **`CLAUDE.md`** - AI åŠ©æ‰‹æŒ‡ä»¤å’Œå¼€å‘è§„èŒƒ
- **`packages/frontend/CLAUDE.md`** - å‰ç«¯å¼€å‘è§„èŒƒå’Œ CSS å˜é‡

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥** - ç¡®ä¿ä½¿ç”¨ pnpm >= 10.18.3
2. **ç«¯å£å ç”¨** - ä¿®æ”¹ `N8N_PORT` ç¯å¢ƒå˜é‡
3. **ç±»å‹é”™è¯¯** - è¿è¡Œ `pnpm build` åå†è¿è¡Œ `pnpm typecheck`

## ğŸ¤ è´¡çŒ®

å†…éƒ¨å›¢é˜Ÿå¼€å‘ï¼Œéµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1. ä½¿ç”¨ Linear è¿›è¡Œä»»åŠ¡è·Ÿè¸ª
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (ä» Linear è·å–åˆ†æ”¯å)
3. æäº¤å‰è¿è¡Œ `pnpm lint` å’Œ `pnpm typecheck`
4. ä½¿ç”¨è§„èŒƒçš„æäº¤ä¿¡æ¯æ ¼å¼
5. åˆ›å»º PR å¹¶å…³è” Linear ticket

## ğŸ“„ è®¸å¯è¯

åŸºäº n8n å¼€æºé¡¹ç›®ï¼Œéµå¾ªç›¸åº”çš„å¼€æºè®¸å¯è¯ã€‚

---

**ç»´æŠ¤å›¢é˜Ÿ**: SASA Platform Team
**æœ€åæ›´æ–°**: 2025-11-14
