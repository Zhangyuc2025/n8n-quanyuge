# 验收标准

> **版本：** v1.0
> **状态：** 设计中

[← 返回总览](../00-总览与导航.md)

---

## ✅ 验收标准

### 功能验收

- [ ] **节点加载**
  - [ ] 内置节点（142个）正常加载
  - [ ] 平台节点从数据库加载
  - [ ] 工作空间节点正确隔离
  - [ ] 节点元数据验证生效
  - [ ] 单节点失败不影响其他节点

- [x] **节点来源标识**（Phase 5.3 UI）
  - [x] 节点选择器显示来源 Badge（基础/平台/第三方/自定义）
  - [x] Badge 显示在节点卡片右侧
  - [x] 后端返回节点 source 字段（builtin/platform/thirdParty/custom）
  - [x] 前端正确映射和显示 Badge 颜色主题
  - [x] AI 分类节点正确显示 source（修复 getNodeView）
  - [x] 支持中英文 i18n 翻译

- [ ] **AI 服务**
  - [ ] 模型列表动态加载
  - [ ] AI 调用成功
  - [ ] 正确计费并扣除余额
  - [ ] Token 使用量准确记录
  - [ ] 余额不足时拒绝调用

- [ ] **节点管理**
  - [ ] 用户可以上传私有节点
  - [ ] 用户可以提交审核
  - [ ] 管理员可以审核节点
  - [ ] 审核通过后全平台可见

- [ ] **数据隔离**
  - [ ] 工作空间 A 看不到工作空间 B 的私有节点
  - [ ] 用户级配置正确隔离
  - [ ] 平台节点对所有用户可见

### 性能验收

- [ ] 节点加载时间 < 2s
- [ ] AI 调用响应时间 < 10s
- [ ] 单节点失败不影响整体性能

### 安全验收

- [ ] API Key 加密存储
- [ ] 节点代码沙箱隔离
- [ ] 用户配置数据加密
- [ ] 工作空间数据隔离

---

## 📝 附录

### 关键文件清单

**后端：**
- `packages/cli/src/load-nodes-and-credentials.ts`
- `packages/cli/src/services/custom-node.service.ts`
- `packages/cli/src/services/platform-ai.service.ts`
- `packages/cli/src/controllers/custom-nodes.controller.ts`
- `packages/cli/src/controllers/platform-ai.controller.ts`
- `packages/cli/src/controllers/available-nodes.controller.ts` *(节点 source 字段映射)*

**前端：**
- `packages/editor-ui/src/stores/nodeTypes.store.ts`
- `packages/editor-ui/src/components/Node/NodeCreator/NodeCreator.vue`
- `packages/editor-ui/src/api/nodeTypes.ts`
- `packages/editor-ui/src/features/shared/nodeCreator/components/ItemTypes/NodeItem.vue` *(节点来源 Badge 显示)*
- `packages/editor-ui/src/features/shared/nodeCreator/views/viewsData.ts` *(AI 分类节点来源保留)*
- `packages/editor-ui/src/features/shared/nodeCreator/composables/useActionsGeneration.ts` *(节点简化时保留 source)*
- `packages/editor-ui/src/app/api/available-nodes.api.ts` *(NodeSource 枚举定义)*
- `packages/editor-ui/src/Interface.ts` *(SimplifiedNodeType 扩展 source 字段)*
- `packages/frontend/@n8n/i18n/src/locales/zh.json` *(中文翻译)*
- `packages/frontend/@n8n/i18n/src/locales/en.json` *(英文翻译)*

**数据库：**
- `packages/@n8n/db/src/entities/platform-ai-provider.entity.ts`
- `packages/@n8n/db/src/entities/platform-node.entity.ts`
- `packages/@n8n/db/src/entities/custom-node.entity.ts`
- `packages/@n8n/db/src/entities/user-node-config.entity.ts`

**节点：**
- `packages/@n8n/nodes-langchain/nodes/llms/LmChatPlatform/LmChatPlatform.node.ts`

---

**文档版本：** v1.1（新增节点来源标识验收）
**最后更新：** 2025-01-11
**维护者：** 开发团队

[← 上一章：实施计划](./09-实施计划.md) | [返回总览](../00-总览与导航.md)
